<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration Form</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      .step-indicator {
        counter-reset: step;
      }
      .step-indicator li {
        counter-increment: step;
        position: relative;
      }
      .step-indicator li::before {
        content: counter(step);
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background: #6c757d;
        color: white;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
      }
      .step-indicator li.active::before {
        background: #0d6efd;
      }
      .step-indicator li.completed::before {
        background: #198754;
        content: "✓";
      }
      .form-step {
        display: none;
      }
      .form-step.active {
        display: block;
      }
      .terms-text {
        max-height: 300px;
        overflow-y: auto;
        border: 1px solid #dee2e6;
        padding: 15px;
        background-color: #f8f9fa;
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <!-- Progress Indicator -->
      <div class="row mb-4">
        <div class="col-12">
          <ol
            class="step-indicator list-unstyled d-flex justify-content-between mb-0"
          >
            <li class="text-center active" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Terms</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Reference</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Email</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Personal</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Parents</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Address</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Education</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Documents</small>
            </li>
            <li class="text-center" style="flex: 1">
              <div style="height: 30px; margin-bottom: 10px"></div>
              <small>Submit</small>
            </li>
          </ol>
        </div>
      </div>

      <form id="registrationForm" enctype="multipart/form-data">
        <!-- Step 1: Terms and Conditions -->
        <div class="form-step active" data-step="1">
          <div class="card">
            <div class="card-header">
              <h4>Step 1: Terms and Conditions</h4>
            </div>
            <div class="card-body">
              <div class="terms-text">
                <h5>Membership Eligibility Requirements:</h5>
                <ol>
                  <li>
                    <strong>Educational Qualification:</strong> The primary
                    requirement for becoming a member of Youth Save A Smile
                    Foundation is to have participated in and successfully
                    passed the SSC examination from any school.
                  </li>
                  <li>
                    <strong>Membership Application:</strong> To obtain
                    membership in the Youth Save A Smile Foundation, one must
                    contact any regular member of the foundation and, with that
                    member's recommendation, submit the necessary information in
                    the designated membership form. The applicant must express
                    their commitment to voluntary humanitarian service and sign
                    accordingly, subject to the consideration of the President
                    or General Secretary.
                  </li>
                  <li>
                    <strong>Personal Qualities:</strong> Members must be
                    courteous, tolerant, enthusiastic, humble, thoughtful, and
                    responsible.
                  </li>
                  <li>
                    <strong>Monthly Contribution:</strong> Each member must pay
                    monthly dues as decided by the Executive Committee.
                  </li>
                  <li>
                    <strong>Volunteer Spirit:</strong> Priority will be given to
                    students who have a volunteer mindset, wish to contribute to
                    the overall development of their batch and social
                    development, are involved or willing to be involved in
                    various creative works, and are not engaged in any immoral
                    activities.
                  </li>
                  <li>
                    <strong>Commitment to Excellence:</strong> Priority will be
                    given to students who are committed to the maximum
                    development of their talents and are interested in
                    contributing to the development of their batch mates and
                    humanity.
                  </li>
                </ol>
              </div>
              <div class="form-check mt-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="agreeTerms"
                  required
                />
                <label class="form-check-label" for="agreeTerms">
                  I agree to the terms and conditions of Save A Smile Foundation
                </label>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
                id="step1Next"
                disabled
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 2: Reference Code -->
        <div class="form-step" data-step="2">
          <div class="card">
            <div class="card-header">
              <h4>Step 2: Reference Verification</h4>
            </div>
            <div class="card-body">
              <p>
                Please enter the reference code provided by an existing member
                of the foundation:
              </p>
              <div class="mb-3">
                <label for="referenceCode" class="form-label"
                  >Reference Code *</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="referenceCode"
                  name="referenceCode"
                  required
                />
                <div class="invalid-feedback" id="referenceError"></div>
              </div>
              <button
                type="button"
                class="btn btn-info"
                onclick="verifyReference()"
              >
                Verify Reference
              </button>
              <div id="referenceStatus" class="mt-2"></div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
                id="step2Next"
                disabled
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 3: Email Verification -->
        <div class="form-step" data-step="3">
          <div class="card">
            <div class="card-header">
              <h4>Step 3: Email Verification</h4>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <label for="email" class="form-label">Email Address *</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  required
                />
              </div>
              <button
                type="button"
                class="btn btn-info"
                onclick="sendVerificationCode()"
                id="sendCodeBtn"
              >
                Send Verification Code
              </button>

              <div id="verificationSection" style="display: none" class="mt-3">
                <div class="mb-3">
                  <label for="verificationCode" class="form-label"
                    >Verification Code *</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="verificationCode"
                    name="verificationCode"
                  />
                </div>
                <button
                  type="button"
                  class="btn btn-success"
                  onclick="verifyEmail()"
                >
                  Verify Code
                </button>
              </div>
              <div id="emailStatus" class="mt-2"></div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
                id="step3Next"
                disabled
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 4: Personal Details -->
        <div class="form-step" data-step="4">
          <div class="card">
            <div class="card-header">
              <h4>Step 4: Personal Details</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="fullName" class="form-label">Full Name *</label>
                    <input
                      type="text"
                      class="form-control"
                      id="fullName"
                      name="fullName"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="nameBangla" class="form-label"
                      >নাম (বাংলা) *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nameBangla"
                      name="nameBangla"
                      required
                    />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="dateOfBirth" class="form-label"
                      >Date of Birth *</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="dateOfBirth"
                      name="dateOfBirth"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="bloodGroup" class="form-label"
                      >Blood Group *</label
                    >
                    <select
                      class="form-control"
                      id="bloodGroup"
                      name="bloodGroup"
                      required
                    >
                      <option value="">Select Blood Group</option>
                      <option value="A+">A+</option>
                      <option value="A-">A-</option>
                      <option value="B+">B+</option>
                      <option value="B-">B-</option>
                      <option value="AB+">AB+</option>
                      <option value="AB-">AB-</option>
                      <option value="O+">O+</option>
                      <option value="O-">O-</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 5: Parents Information -->
        <div class="form-step" data-step="5">
          <div class="card">
            <div class="card-header">
              <h4>Step 5: Parents Information</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="motherName" class="form-label"
                      >Mother's Name *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="motherName"
                      name="motherName"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="motherProfession" class="form-label"
                      >Mother's Profession *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="motherProfession"
                      name="motherProfession"
                      required
                    />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="fatherName" class="form-label"
                      >Father's Name *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="fatherName"
                      name="fatherName"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="fatherProfession" class="form-label"
                      >Father's Profession *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="fatherProfession"
                      name="fatherProfession"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 6: Address and Contact -->
        <div class="form-step" data-step="6">
          <div class="card">
            <div class="card-header">
              <h4>Step 6: Address and Contact Information</h4>
            </div>
            <div class="card-body">
              <h5>Permanent Address</h5>
              <div class="row">
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="district" class="form-label">District *</label>
                    <select
                      class="form-control"
                      id="district"
                      name="district"
                      required
                      onchange="loadUpazilas()"
                    >
                      <option value="">Select District</option>
                      <option value="Dhaka">Dhaka</option>
                      <option value="Chittagong">Chittagong</option>
                      <option value="Sylhet">Sylhet</option>
                      <option value="Rajshahi">Rajshahi</option>
                      <option value="Khulna">Khulna</option>
                      <option value="Barishal">Barishal</option>
                      <option value="Rangpur">Rangpur</option>
                      <option value="Mymensingh">Mymensingh</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="upazila" class="form-label">Upazila *</label>
                    <select
                      class="form-control"
                      id="upazila"
                      name="upazila"
                      required
                    >
                      <option value="">Select Upazila</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="village" class="form-label"
                      >Village/Area *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="village"
                      name="village"
                      required
                    />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="personalMobile" class="form-label"
                      >Mobile No (Personal) *</label
                    >
                    <input
                      type="tel"
                      class="form-control"
                      id="personalMobile"
                      name="personalMobile"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="homeMobile" class="form-label"
                      >Mobile No (Home)</label
                    >
                    <input
                      type="tel"
                      class="form-control"
                      id="homeMobile"
                      name="homeMobile"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 7: Education Information -->
        <div class="form-step" data-step="7">
          <div class="card">
            <div class="card-header">
              <h4>Step 7: Education Information</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="sscBatch" class="form-label">SSC Batch *</label>
                    <select
                      class="form-control"
                      id="sscBatch"
                      name="sscBatch"
                      required
                    >
                      <option value="">Select SSC Batch</option>
                      <option value="2020">2020</option>
                      <option value="2021">2021</option>
                      <option value="2022">2022</option>
                      <option value="2023">2023</option>
                      <option value="2024">2024</option>
                      <option value="2025">2025</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="sscSchool" class="form-label"
                      >SSC School *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="sscSchool"
                      name="sscSchool"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 8: Documents -->
        <div class="form-step" data-step="8">
          <div class="card">
            <div class="card-header">
              <h4>Step 8: Upload Documents</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="photo" class="form-label">Photo *</label>
                    <input
                      type="file"
                      class="form-control"
                      id="photo"
                      name="photo"
                      accept="image/*"
                      required
                    />
                    <small class="form-text text-muted"
                      >Upload a passport size photo (JPG, PNG, max 2MB)</small
                    >
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="signature" class="form-label"
                      >Signature *</label
                    >
                    <input
                      type="file"
                      class="form-control"
                      id="signature"
                      name="signature"
                      accept="image/*"
                      required
                    />
                    <small class="form-text text-muted"
                      >Upload your signature (JPG, PNG, max 1MB)</small
                    >
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                Next
              </button>
            </div>
          </div>
        </div>

        <!-- Step 9: Confirmation and Submit -->
        <div class="form-step" data-step="9">
          <div class="card">
            <div class="card-header">
              <h4>Step 9: Confirmation and Submit</h4>
            </div>
            <div class="card-body">
              <div class="alert alert-info">
                <h5>Please review your information before submitting:</h5>
                <div id="reviewData"></div>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="confirmSubmit"
                  required
                />
                <label class="form-check-label" for="confirmSubmit">
                  I confirm that all the information provided is correct and I
                  want to submit my application.
                </label>
              </div>
            </div>
            <div class="card-footer">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                Previous
              </button>
              <button
                type="submit"
                class="btn btn-success"
                id="submitBtn"
                disabled
              >
                Submit Application
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script>
      let currentStep = 1;
      let emailVerified = false;
      let referenceVerified = false;

      // Initialize
      $(document).ready(function () {
        // Terms checkbox handler
        $("#agreeTerms").change(function () {
          $("#step1Next").prop("disabled", !this.checked);
        });

        // Confirm submit checkbox handler
        $("#confirmSubmit").change(function () {
          $("#submitBtn").prop("disabled", !this.checked);
        });

        // Form submit handler
        $("#registrationForm").submit(function (e) {
          e.preventDefault();
          submitForm();
        });
      });

      function nextStep() {
        if (validateStep(currentStep)) {
          currentStep++;
          showStep(currentStep);
          updateProgressIndicator();
          if (currentStep === 9) {
            populateReviewData();
          }
        }
      }

      function prevStep() {
        currentStep--;
        showStep(currentStep);
        updateProgressIndicator();
      }

      function showStep(step) {
        $(".form-step").removeClass("active");
        $(`.form-step[data-step="${step}"]`).addClass("active");
      }

      function updateProgressIndicator() {
        $(".step-indicator li").each(function (index) {
          const stepNum = index + 1;
          $(this).removeClass("active completed");
          if (stepNum < currentStep) {
            $(this).addClass("completed");
          } else if (stepNum === currentStep) {
            $(this).addClass("active");
          }
        });
      }

      function validateStep(step) {
        const stepElement = $(`.form-step[data-step="${step}"]`);
        const requiredFields = stepElement.find(
          "input[required], select[required]"
        );
        let isValid = true;

        requiredFields.each(function () {
          if (!$(this).val()) {
            $(this).addClass("is-invalid");
            isValid = false;
          } else {
            $(this).removeClass("is-invalid");
          }
        });

        // Special validations
        if (step === 2 && !referenceVerified) {
          alert("Please verify your reference code first.");
          return false;
        }

        if (step === 3 && !emailVerified) {
          alert("Please verify your email address first.");
          return false;
        }

        return isValid;
      }

      function verifyReference() {
        const referenceCode = $("#referenceCode").val();
        if (!referenceCode) {
          alert("Please enter a reference code.");
          return;
        }

        $.ajax({
          url: "join_us_action.php",
          method: "POST",
          data: { reference_code: referenceCode, action: "verify_reference" },
          success: function (response) {
            const result = JSON.parse(response);
            if (result.success) {
              $("#referenceStatus").html(
                '<div class="alert alert-success">Reference verified successfully!</div>'
              );
              $("#step2Next").prop("disabled", false);
              referenceVerified = true;
            } else {
              $("#referenceStatus").html(
                '<div class="alert alert-danger">Invalid reference code. Please check and try again.</div>'
              );
              $("#step2Next").prop("disabled", true);
              referenceVerified = false;
            }
          },
          error: function () {
            $("#referenceStatus").html(
              '<div class="alert alert-danger">Error verifying reference. Please try again.</div>'
            );
          },
        });
      }

      function sendVerificationCode() {
        const email = $("#email").val();
        if (!email) {
          alert("Please enter your email address.");
          return;
        }

        $("#sendCodeBtn").prop("disabled", true).text("Sending...");

        $.ajax({
          url: "send_verification.php",
          method: "POST",
          data: { email: email },
          success: function (response) {
            const result = JSON.parse(response);
            if (result.success) {
              $("#verificationSection").show();
              $("#emailStatus").html(
                '<div class="alert alert-success">Verification code sent to your email!</div>'
              );
            } else {
              $("#emailStatus").html(
                '<div class="alert alert-danger">Error sending verification code. Please try again.</div>'
              );
            }
            $("#sendCodeBtn")
              .prop("disabled", false)
              .text("Send Verification Code");
          },
          error: function () {
            $("#emailStatus").html(
              '<div class="alert alert-danger">Error sending verification code. Please try again.</div>'
            );
            $("#sendCodeBtn")
              .prop("disabled", false)
              .text("Send Verification Code");
          },
        });
      }

      function verifyEmail() {
        const email = $("#email").val();
        const code = $("#verificationCode").val();

        if (!code) {
          alert("Please enter the verification code.");
          return;
        }

        $.ajax({
          url: "verify_email.php",
          method: "POST",
          data: { email: email, code: code },
          success: function (response) {
            const result = JSON.parse(response);
            if (result.success) {
              $("#emailStatus").html(
                '<div class="alert alert-success">Email verified successfully!</div>'
              );
              $("#step3Next").prop("disabled", false);
              emailVerified = true;
            } else {
              $("#emailStatus").html(
                '<div class="alert alert-danger">Invalid verification code. Please try again.</div>'
              );
              emailVerified = false;
            }
          },
          error: function () {
            $("#emailStatus").html(
              '<div class="alert alert-danger">Error verifying email. Please try again.</div>'
            );
          },
        });
      }

      function loadUpazilas() {
        const district = $("#district").val();
        const upazilaSelect = $("#upazila");

        upazilaSelect.html('<option value="">Select Upazila</option>');

        if (district) {
          $.ajax({
            url: "get_upazilas.php",
            method: "POST",
            data: { district: district },
            success: function (response) {
              const upazilas = JSON.parse(response);
              upazilas.forEach(function (upazila) {
                upazilaSelect.append(
                  `<option value="${upazila}">${upazila}</option>`
                );
              });
            },
          });
        }
      }

      function populateReviewData() {
        const reviewData = `
                <strong>Personal Information:</strong><br>
                Name: ${$("#fullName").val()} (${$("#nameBangla").val()})<br>
                Date of Birth: ${$("#dateOfBirth").val()}<br>
                Blood Group: ${$("#bloodGroup").val()}<br><br>
                
                <strong>Contact Information:</strong><br>
                Email: ${$("#email").val()}<br>
                Personal Mobile: ${$("#personalMobile").val()}<br>
                Home Mobile: ${$("#homeMobile").val()}<br><br>
                
                <strong>Address:</strong><br>
                ${$("#village").val()}, ${$("#upazila").val()}, ${$(
          "#district"
        ).val()}<br><br>
                
                <strong>Education:</strong><br>
                SSC Batch: ${$("#sscBatch").val()}<br>
                School: ${$("#sscSchool").val()}<br>
            `;
        $("#reviewData").html(reviewData);
      }

      function submitForm() {
        const formData = new FormData($("#registrationForm")[0]);

        $("#submitBtn").prop("disabled", true).text("Submitting...");

        $.ajax({
          url: "submit_registration.php",
          method: "POST",
          data: formData,
          processData: false,
          contentType: false,
          success: function (response) {
            const result = JSON.parse(response);
            if (result.success) {
              alert(
                "Registration submitted successfully! You will receive a confirmation email shortly."
              );
              window.location.href = "index.php";
            } else {
              alert("Error submitting registration: " + result.message);
              $("#submitBtn")
                .prop("disabled", false)
                .text("Submit Application");
            }
          },
          error: function () {
            alert("Error submitting registration. Please try again.");
            $("#submitBtn").prop("disabled", false).text("Submit Application");
          },
        });
      }

      // Disable the next button initially
      $("#step1Next").prop("disabled", true);
      $("#step2Next").prop("disabled", true);
      $("#step3Next").prop("disabled", true);
      $("#submitBtn").prop("disabled", true);
      // Show the first step
      showStep(currentStep);
      // Update progress indicator
      updateProgressIndicator();
    </script>
  </body>
</html>
